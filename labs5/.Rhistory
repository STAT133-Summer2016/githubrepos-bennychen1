library(xml2)
library(ggplot2)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
link <- "http://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist-90d.xml"
exrate.xml <- read_xml(link)
exrate.xml
exrate.xml <- xml_ns_strip(exrate.xml)
xml_find_all(exrate.xml, "/gesmes:Envelope")
exrate_root <- xml_root(exrate.xml)
exrate_root
exrate.xml <- xml_ns_strip(exrate.xml)
xml_find_all(exrate.xml, "/gesmes:Envelope")
exrate_root <- xml_root(exrate.xml)
exrate_root
exrate.xml
first_cube <- xml_children(exrate_root)[[3]]
first_cube
gbp_nodes = exrate_root %>%
xml_find_all('//Cube[@currency="GBP"]')
gbp_nodes
?xml_attr
gbp_rates = gbp_nodes %>%
xml_attr("rate") %>%
as.numeric()
gbp_rates
exrate_root %>%
xml_find_all("//Cube") %>%
xml_attr("time") %>%
ymd()
# <Your code>
exrate_root %>%
xml_find_all("//Cube[@time]") %>%
xml_attr("time") %>%
ymd()
exrate_root %>%
xml_find_all("//Cube[@currency='GBP']") %>%
xml_attr("time") %>%
ymd()
exrate_root %>%
xml_find_all("//Cube[@time]") %>%
xml_attr("time") %>%
ymd()
gbp_date <- exrate_root %>%
xml_find_all("//Cube[@time]") %>%
xml_attr("time") %>%
ymd()
gbp_time <- exrate_root %>%
xml_find_all("//Cube[@time]") %>%
xml_attr("time") %>%
ymd()
gbp_rates
ggplot(aes(gbp_time,gbp_rates))
rbind(gbp_rates,gbp_time)
ggplot(data.frame(gbp_rates,gbp_time),aes(gbp_time,gbp_rates)) + geom_density()
ggplot(data.frame(gbp_rates,gbp_time),aes(gbp_time,gbp_rates)) + geom_line()
ggplot(data.frame(gbp_rates,gbp_time),aes(gbp_time,gbp_rates)) + geom_line() + labs(title="Exchange Rate Over Time",x="Date",y="Exchange Rate (against Euro)")
str_c("//Cube[@currency=","x]")
str_c("//Cube[@currency=","'x']")
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c("//Cube[@currency=","'x']")) %>%
xml_attr("rate") %>%
as.numeric()
}
lapply(c("GBP","USD","CAD","JPY"),GetExchangeRates)
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c("//Cube[@currency=","x]")) %>%
xml_attr("rate") %>%
as.numeric()
}
lapply(c("GBP","USD","CAD","JPY"),GetExchangeRates)
GetExchangeRates("USD")
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c("//Cube[@currency=","'x']"))
}
GetExchangeRates(USD)
GetExchangeRates("USD")
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c("//Cube[@currency=","x]"))
}
GetExchangeRates("USD")
GetExchangeRates(USD)
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c('//Cube[@currency=','x]')) %>%
xml_attr("rate") %>%
as.numeric()
}
lapply(c("GBP","USD","CAD","JPY"),GetExchangeRates)
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c('//Cube[@currency=','"x"]')) %>%
xml_attr("rate") %>%
as.numeric()
}
GetExchangeRates("USD")
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c('//Cube[@currency=','x]')) %>%
xml_attr("rate") %>%
as.numeric()
}
GetExchangeRates("USD")
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c('//Cube[@currency=','x]'))
}
GetExchangeRates("USD")
GetExchangeRates("USD")
str_c('//Cube[@currency=','x]'
str_c("//Cube[@currency=","x]"
str_c("//Cube[@currency=","x]")
str_c('//Cube[@currency=','x]')
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c('//Cube[@currency=','x]')) %>%
xml_attr("rate") %>%
as.numeric()
}
GetExchangeRates("USD")
str_c('//Cube[@currency=','"USD"]')
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c('//Cube[@currency=',x,']')) %>%
xml_attr("rate") %>%
as.numeric()
}
GetExchangeRates("USD")
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c('//Cube[@currency=',x,']'
}
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c('//Cube[@currency=',x,']')
}
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c('//Cube[@currency=',x,']'))
}
GetExchangeRates("USD")
str_c('//Cube[@currency=',x,']'
str_c('//Cube[@currency=',x,']')
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c("//Cube[@currency=",x,"]")) %>%
xml_attr("rate") %>%
as.numeric()
}
GetExchangeRates("USD")
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all('//Cube[@currency=x]')) %>%
xml_attr("rate") %>%
as.numeric()
}
``
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all('//Cube[@currency=x]')) %>%
xml_attr("rate") %>%
as.numeric()
}
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all('//Cube[@currency=x]') %>%
xml_attr("rate") %>%
as.numeric()
}
GetExchangeRates("USD")
str_c('//Cube[@currency=',x,']')
str_c('//Cube','x')
str_c('//Cube','x',collapse="")
str_c('//Cube','x',collapse='')
str_c("//Cube[@currency=",1,"]")
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c("//Cube[@currency=",x,"]")) %>%
xml_attr("rate") %>%
as.numeric()
}
GetExchangeRates('USD')
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c("//Cube[@currency=",x,"]"))
}
GetExchangeRates('USD')
exrate_rot
exrate_root
GetExchangeRates("'USD'")
str_c("//Cube[@currency=",1,"]")
str_c("//Cube[@currency=","'1'","]")
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c("//Cube[@currency=",'x',"]")) %>%
xml_attr("rate") %>%
as.numeric()
}
GetExchangeRates('USD')
GetExchangeRates("'USD'")
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c("//Cube[@currency=",x,"]")) %>%
xml_attr("rate") %>%
as.numeric()
}
GetExchangeRates("'USD'")
lapply(c("'GBP'","'USD'","'CAD'","'JPY'"),GetExchangeRates)
names(currency_list) <- c("GBP","USD","CAD","JPY")
currency_list <- lapply(c("'GBP'","'USD'","'CAD'","'JPY'"),GetExchangeRates)
names(currency_list) <- c("GBP","USD","CAD","JPY")
currency_list
exrate.df <- do.call(rbind,currency_list)
exrate.df
View(exrate.df)
currency_list <- lapply(c("'GBP'","'USD'","'CAD'","'AUD'"),GetExchangeRates)
names(currency_list) <- c("GBP","USD","CAD","'AUD'")
exrate.df <- do.call(cbind,currency_list)
exrate.df
View(exrate.df)
currency_list <- lapply(c("'GBP'","'USD'","'CAD'","'AUD'"),GetExchangeRates)
names(currency_list) <- c("GBP","USD","CAD","AUD")
exrate.df <- do.call(cbind,currency_list)
exrate_time <- exrate_root %>%
xml_find_all("//Cube[@time]") %>%
xml_attr("time") %>%
ymd()
exrate.df <- do.call(cbind,currency_list) %>%
mutate(time= exrate_time)
exrate.df <- mutate(exrate.df,time= exrate_time)
exrate_time <- exrate_root %>%
xml_find_all("//Cube[@time]") %>%
xml_attr("time") %>%
ymd()
exrate_time
exrate.df <- do.call(cbind,currency_list) %>%
mutate(time= c(exrate_time))
exrate.df <- do.call(cbind,currency_list)
exrate.df <- data.frame(do.call(cbind,currency_list))
mutate(time= exrate_time)
exrate.df <- data.frame(do.call(cbind,currency_list)) %>%
mutate(time= exrate_time)
exrate.df <- exrate.df %>%
gather(key=Currency,value=rate,-time)
View(exrate.df)
ggplot(exrate.df,aes(rate,time)) + geom_line(color=Currency)
ggplot(exrate.df,aes(rate,time)) + geom_line(aes(color=Currency))
ggplot(exrate.df,aes(time,rate)) + geom_line(aes(color=Currency))
ggplot(exrate.df,aes(time,rate)) + geom_line(aes(color=Currency)) + labs(title="Exchange Rates Over Time",x="Date",y= "Exchange Rate (against euro)")
# Chunk 1
# <Packages go here>
# Chunk 2
library(xml2)
library(ggplot2)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
# Chunk 3
# <Your Code>
link <- "http://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist-90d.xml"
exrate.xml <- read_xml(link)
# Chunk 4
exrate.xml <- xml_ns_strip(exrate.xml)
xml_find_all(exrate.xml, "/gesmes:Envelope")
# Chunk 5
# <Your Code>
exrate_root <- xml_root(exrate.xml)
# Chunk 6
first_cube <- xml_children(exrate_root)[[3]]
first_cube
# Chunk 7
first_time_cube <- exrate_root %>%
xml_children() %>%
.[[3]] %>%
xml_children()
first_time_cube
# Chunk 8
gbp_nodes = exrate_root %>%
xml_find_all('//Cube[@currency="GBP"]')
# Chunk 9
gbp_rates = gbp_nodes %>%
xml_attr("rate") %>%
as.numeric()
gbp_rates
# Chunk 11
# <Your code>
exrate_time <- exrate_root %>%
xml_find_all("//Cube[@time]") %>%
xml_attr("time") %>%
ymd()
# Chunk 12
# <Your code>
ggplot(data.frame(gbp_rates,gbp_time),aes(gbp_time,gbp_rates)) + geom_line() + labs(title="Exchange Rate Over Time",x="Date",y="Exchange Rate (against Euro)")
# Chunk 13
# <Your code>
GetExchangeRates <- function(x) {
exrate_root %>%
xml_find_all(str_c("//Cube[@currency=",x,"]")) %>%
xml_attr("rate") %>%
as.numeric()
}
# Chunk 14
# <Your code>
currency_list <- lapply(c("'GBP'","'USD'","'CAD'","'AUD'"),GetExchangeRates)
names(currency_list) <- c("GBP","USD","CAD","AUD")
# Chunk 15
# <Your code>
exrate.df <- data.frame(do.call(cbind,currency_list)) %>%
mutate(time= exrate_time)
# Chunk 16
# <Your code>
exrate.df <- exrate.df %>%
gather(key=Currency,value=rate,-time)
ggplot(exrate.df,aes(time,rate)) + geom_line(aes(color=Currency)) + labs(title="Exchange Rates Over Time",x="Date",y= "Exchange Rate (against euro)")
?sd
sd_serum <- sd(heartattack$Serum_Cholesterol) * sqrt(n-1)
library(readxl)
heartattack <- read_excel("C:/Users/BennyPC/Documents/Stat135/HeartAttack.xlsx")
sd_serum <- sd(heartattack$Serum_Cholesterol) * sqrt(n-1)
sd_serum <- sd(heartattack$Serum_Cholesterol) * sqrt(269)
sd_serum <- sd(heartattack$Serum_Cholesterol) * 269
sd_serum <- sd(heartattack$Serum_Cholesterol) * 1/269
sd_serum <- sd(heartattack$Serum_Cholesterol)
sd_serum <- sd(heartattack$Serum_Cholesterol) * sqrt(269/270)
nrow(car_data)
library(readxl)
car_data <- read_excel("C:/Users/BennyPC/Documents/Stat135/car_data.xlsx")
nrow(car_data)
mean_city_mpg <- mean(car_data$city_mpg)
mean_city_mpg
sd_city_mpg <- sd(car_data$city_mpg) * sqrt(204/205)
sd_city_mpg
